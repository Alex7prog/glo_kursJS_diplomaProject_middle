(()=>{"use strict";(()=>{const e=document.querySelector(".clubs-list ul"),t=()=>{e.style.display="block"===e.style.display?"none":"block"};document.addEventListener("click",(n=>{const s=n.target;e.style.zIndex="1100",s.closest(".clubs-list")?s.matches("p")&&t():"block"===e.style.display&&t()}))})(),(()=>{const e=document.getElementById("free_visit_form"),t=()=>{e.style.display="block"===e.style.display?"none":"block"};document.addEventListener("click",(e=>{const n=e.target;n.closest(".open-popup")&&t(),n.closest("#free_visit_form")&&(n.matches(".close_icon")||n.matches(".overlay")||n.matches(".form-wrapper"))&&t()}))})(),(()=>{const e=document.getElementById("callback_form"),t=()=>{e.style.display="block"===e.style.display?"none":"block"};document.addEventListener("click",(e=>{const n=e.target;n.matches(".callback-btn")&&!n.closest("form")&&t(),n.closest("#callback_form")&&(n.matches(".close_icon")||n.matches(".overlay")||n.matches(".form-wrapper"))&&t()}))})(),(()=>{const e=document.querySelector(".fixed-gift"),t=document.getElementById("gift"),n=()=>{t.style.display="block"===t.style.display?"none":"block"};document.addEventListener("click",(t=>{const s=t.target;s.closest(".fixed-gift")&&(n(),e.style.display="none"),s.closest("#gift")&&(s.matches(".close_icon")||s.matches(".overlay")||s.matches(".form-wrapper")||s.matches(".close-btn"))&&n()}))})(),(()=>{const e=document.querySelector(".main-slider"),t=[...e.children],n=document.createElement("ul");let s,r=0;const l=()=>{t[r].style.display="none",c[r].classList.remove("slick-active")},a=()=>{t[r].style.display="flex",c[r].classList.add("slick-active")},o=()=>{l(),r++,r>=t.length&&(r=0),a()},i=(e=3e3)=>{s=setInterval(o,e)};n.addEventListener("click",(e=>{const t=e.target;t.matches("[index]")&&(l(),r=t.getAttribute("index"),a())})),e.addEventListener("mouseover",(e=>{e.target.closest(".main-slider")&&clearInterval(s)})),e.addEventListener("mouseout",(e=>{e.target.closest(".main-slider")&&i()})),(()=>{n.style.height="10px",n.classList.add("slider-dots");for(let e=0;e<t.length;e++){const t=document.createElement("li"),s=document.createElement("button");t.style.height="100%",n.appendChild(t),s.style.height="100%",s.setAttribute("index",e),t.appendChild(s)}e.appendChild(n)})();const c=n.querySelectorAll("li");c[r].classList.add("slick-active"),i(3e3)})(),(()=>{const e=document.getElementById("services").querySelector(".wrapper"),t=document.querySelector(".services-slider"),n=document.createElement("a"),s=document.createElement("a"),r=document.createElement("span"),l=document.createElement("span"),a=[{breakpoint:1024,slideToShow:3},{breakpoint:768,slideToShow:1}];let o=5,i=t.querySelectorAll(".slide"),c=Math.floor(100/o);const d=()=>{let a=document.getElementById("style-services-slider");a||(a=document.createElement("style"),a.id="style-services-slider"),a.textContent=`\n\t\t\t\t.service-slider-wrap-addstyle {\n\t\t\t\t\toverflow: hidden !important;\n\t\t\t\t}\n\t\t\t\t.service-slider-addstyle {\n\t\t\t\t\ttransition-property: transform;\n    \t\t\t\ttransition-duration: 0.5s;\n\t\t\t\t\twill-change: transform !important;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t}\n\t\t\t\t.service-slider-item-addstyle {\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tflex: 0 0 ${c}% !important;\n\t\t\t\t}\n\t\t\t\t.services-slider-arrow {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 45%;\n\t\t\t\t\tmargin-top: -18px;\n\t\t\t\t\tz-index: 100;\n\t\t\t\t\tcursor: pointer\n\t\t\t\t}\n\t\t\t\t.services-slider-arrow.prev {\n\t\t\t\t\tleft: 0px\n\t\t\t\t}\n\t\t\t\t.services-slider-arrow.next {\n\t\t\t\t\tright: 0px\n\t\t\t\t}\n\t\t\t\t.services-slider-arrow-span {\n\t\t\t\t\twidth: 36px;\n\t\t\t\t\theight: 37px;\n\t\t\t\t\tbackground-color: #f4c71b;\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tpadding-top: 11px\n\t\t\t\t}\n\t\t\t`,document.head.appendChild(a),e.classList.add("service-slider-wrap-addstyle"),t.classList.add("service-slider-addstyle");for(const e of i)e.classList.add("service-slider-item-addstyle");e.style.position="relative",r.className="fa fa-arrow-left services-slider-arrow-span",l.className="fa fa-arrow-right services-slider-arrow-span",n.className="services-slider-arrow prev",s.className="services-slider-arrow next",e.appendChild(n),n.appendChild(r),e.appendChild(s),s.appendChild(l)};e.addEventListener("click",(e=>{e.target.matches(".fa-arrow-left")?(()=>{const e=i[i.length-1].cloneNode(!0);t.prepend(e),t.style.transform=`translateX(${c/2}%)`,setTimeout((()=>{t.style.transitionDuration="0s",i[i.length-1].remove(),i=t.querySelectorAll(".slide"),t.style.transform="translateX(0%)"}),550),t.style.transitionDuration="0.5s"})():e.target.matches(".fa-arrow-right")&&(()=>{const e=i[0].cloneNode(!0);t.append(e),t.style.transform=`translateX(-${c/2}%)`,setTimeout((()=>{t.style.transitionDuration="0s",i[0].remove(),i=t.querySelectorAll(".slide"),t.style.transform="translateX(0%)"}),550),t.style.transitionDuration="0.5s"})()})),(()=>{const e=o,t=a.map((e=>e.breakpoint)),n=Math.max(...t),s=()=>{const s=document.documentElement.clientWidth;if(s<n)for(let e=0;e<t.length;e++)s<t[e]&&(o=a[e].slideToShow,c=Math.floor(100/o),d());else o=e,c=Math.floor(100/o),d()};s(),window.addEventListener("resize",s)})()})(),(()=>{const e=document.querySelector(".gallery-slider"),t=e.querySelectorAll(".slide"),n=document.createElement("a"),s=document.createElement("a"),r=document.createElement("span"),l=document.createElement("span"),a=document.createElement("ul");let o,i=0;const c=()=>{t[i].classList.remove("galerry-slider-item-active"),p[i].classList.remove("slick-active")},d=()=>{t[i].classList.add("galerry-slider-item-active"),p[i].classList.add("slick-active")},m=()=>{c(),i++,i>=t.length&&(i=0),d()},u=(e=3e3)=>{o=setInterval(m,e)};e.addEventListener("click",(e=>{const n=e.target;if(n.matches(".fa, [index]")){switch(c(),!0){case n.matches("[index]"):i=n.getAttribute("index");break;case n.matches(".fa-arrow-right"):i++,i>=t.length&&(i=0);break;case n.matches(".fa-arrow-left"):i--,i<0&&(i=t.length-1)}d()}})),e.addEventListener("mouseover",(e=>{e.target.closest(".gallery-slider")&&clearInterval(o)})),e.addEventListener("mouseout",(e=>{e.target.closest(".gallery-slider")&&u()})),(()=>{let n=document.getElementById("style-galerry-slider");n||(n=document.createElement("style"),n.id="style-galerry-slider"),n.textContent="\n                .galerry-slider-addstyle {\n                    position: relative;\n                    height: 550px;\n                    margin: 0 auto;\n                    display: block\n                }\n                .galerry-slider-item-addstyle {\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    -webkit-transform: translate(-50%, -50%);\n                    transform: translate(-50%, -50%);\n                    width: 100%;\n                    opacity: 0;\n                    -webkit-transition: opacity .5s;\n                    transition: opacity .5s\n                }\n                .galerry-slider-item-addstyle img {\n                    height: auto;\n                    width: 100%;\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    -webkit-transform: translate(-50%, -50%);\n                    transform: translate(-50%, -50%)\n                }\n                .galerry-slider-item-active {\n                    opacity: 1;\n                    -webkit-transition: opacity .5s;\n                    transition: opacity .5s\n                }\n                .galerry-slider-arrow-prev {\n                    left: -65px;\n                }\n                .galerry-slider-arrow-next {\n                    right: -65px;\n                }\n                .galerry-slider-dots {\n                    position: absolute;\n                    bottom: 75px;\n                    left: 50%;\n                    margin-left: -65px;\n                    z-index: 1000\n                }\n                .galerry-slider-dots li {\n                    float: left;\n                    height: 100%\n                }\n                .galerry-slider-dots li button {\n                    width: 22px;\n                    height: 100%;\n                    background-color: #fff;\n                    border: none;\n                    border-radius: 2px;\n                    color: transparent;\n                    margin-right: 5px\n                }\n                .galerry-slider-dots li.slick-active button {\n                    background-color: #ffd11a\n                }\n            ",document.head.appendChild(n),e.classList.add("galerry-slider-addstyle");for(const e of t)e.classList.add("galerry-slider-item-addstyle");t[0].classList.add("galerry-slider-item-active")})(),r.className="fa fa-arrow-left",l.className="fa fa-arrow-right",n.className="slider-arrow galerry-slider-arrow-prev ",s.className="slider-arrow galerry-slider-arrow-next",e.appendChild(n),n.appendChild(r),e.appendChild(s),s.appendChild(l),(()=>{a.style.height="10px",a.classList.add("galerry-slider-dots");for(let e=0;e<t.length;e++){const t=document.createElement("li"),n=document.createElement("button");a.appendChild(t),n.style.height="100%",n.setAttribute("index",e),t.appendChild(n)}e.appendChild(a)})();const p=a.querySelectorAll("li");p[i].classList.add("slick-active"),u(3e3)})(),(()=>{const e=document.querySelector(".top-menu"),t=e.querySelector("ul"),n=e.querySelector(".menu-button"),s=e.offsetTop;window.addEventListener("resize",(()=>{document.documentElement.clientWidth<768?(t.style.display="none",n.classList.add("menu-burger-fix")):(t.style.display="flex",n.classList.remove("menu-burger-fix"))})),window.addEventListener("scroll",(()=>{s<=window.pageYOffset?e.classList.add("menu-fix"):e.classList.remove("menu-fix")}))})(),(()=>{const e=document.querySelector(".top-menu").querySelector("img"),t=document.querySelector(".popup-menu"),n=()=>{t.classList.toggle("popup-menu-active")};document.addEventListener("click",(t=>{const s=t.target;s.closest(".popup-menu")&&(s.closest(".close-menu-btn")||"A"===s.tagName)&&n(),s===e&&n()}))})(),(()=>{const e=document.getElementById("card_order").querySelector('[name="name"]'),t={mozaika:{1:1999,6:9900,9:13900,12:19900},schelkovo:{1:2999,6:14990,9:21990,12:24990}};let n,s="1",r="mozaika",l=0,a=t[r][s];if(!document.getElementById("price-total"))return;n=document.getElementById("price-total"),n.textContent=a;const o=()=>{let e,t=+n.textContent;const s=Math.floor(Math.abs(a-t)/10),r=()=>{t<a?(t+=s,t>a&&(t=a)):t>a&&(t-=s,t<a&&(t=a)),n.textContent=t,t!==a?requestAnimationFrame(r):cancelAnimationFrame(e)};e=requestAnimationFrame(r)};document.addEventListener("click",(e=>{const n=e.target;n.matches('[type="radio"]')&&(n.matches('[name="club-name"]')?r=n.value:n.matches('[name="card-type"]')&&(s=n.value),a=Math.round(t[r][s]*(1-l)),o())})),e.addEventListener("change",(()=>{l="ТЕЛО2019"===e.value?.3:0,a=Math.round(t[r][s]*(1-l)),o()}))})(),(()=>{const e=document.getElementById("thanks");e.addEventListener("click",(t=>{const n=t.target;(n.matches(".close_icon")||n.matches(".overlay")||n.matches(".close-btn"))&&(e.style.display="")}))})(),(()=>{const e=document.getElementById("form1"),t=document.getElementById("form2"),n=document.getElementById("banner-form"),s=document.getElementById("card_order"),r=document.getElementById("footer_form"),l=document.createElement("div"),a=new Map([["name",/[^А-яЁё\s]+$/],["phone",/[^+? \d]/]]),o=new Map([["name",/^[А-яЁё]{2,}[\s]?[А-яЁё]*$/],["phone",/^\+\d{12}$/]]),i=new Map([["name","Используйте ввод только кириллицы и пробелов. Должно содержать минимум 2-е буквы."],["phone","Укажите номер телефона в формате: + 12 цифр или 12 цифр."]]),c={mozaika:{"1s":1999,"6s":9900,"9s":13900,"12d":9900,"12s":19900},schelkovo:{"1s":2999,"6s":14990,"9s":21990,"12d":14990,"12s":24990}};l.style.cssText="font-size: 2rem; color: white;";const d=e=>{e.preventDefault();const t=e.target,n=t.querySelectorAll("input"),s=document.getElementById("thanks");let r=!0,a=!1;t.querySelector('[placeholder="Промокод"]')&&(t.querySelector('[placeholder="Промокод"]').name="name-promo");const i=(e,n,s,r=2500)=>{if(s)e.style.border="solid green 1px",setTimeout((()=>{e.style.border=""}),r);else{const s=document.createElement("div");s.style.color="orangered",t.append(s),s.textContent=n,e.style.border="solid orangered 1px",setTimeout((()=>{e.style.border=""}),r),setTimeout((()=>{s.remove()}),r)}};if(t.querySelector(".personal-data")){const e=t.querySelector(".personal-data");e.querySelector("input").checked||(r=!1,i(e,"Необходимо дать согласие на обработку персональных данных",r))}if(t.querySelector('[name="club-name"]')){const e=t.querySelectorAll('[name="club-name"]');e.forEach((e=>{e.checked&&(a=!0)})),a||i(e[0],"Выберите клуб",a)}else a=!0;if(t.querySelectorAll('[type="text"], [type="tel"]').forEach((e=>{"Промокод"!==e.placeholder&&(e.value=e.value.trim(),o.get(e.name).test(e.value)?i(e,"",!0):(r=!1,i(e,`Неверный формат данных. Введите "${e.placeholder}" еще раз.`,!1)))})),!r||!a)return;const d=new FormData(t),m={};if("card_order"===t.id&&t.querySelector("#price-total")&&(m["price-total"]=t.querySelector("#price-total").textContent),d.forEach(((e,t)=>{"form_name"!==t&&(m[t]=e)})),"card_order"===t.id&&t.querySelector(".cards-types")){const e="Тело Мозаика"===document.querySelector(".club-head").querySelector("h3").textContent?"mozaika":"schelkovo";m["club-name"]=e,m["card-price"]=c[e][m["card-type"]]}l.textContent="Передача данных...",t.appendChild(l);const u=e=>{t.closest(".popup")&&(t.closest(".popup").style.display="none"),l.remove(),s.style.display="block",s.querySelector("p").textContent=e};(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(m).then((e=>{if(200!==e.status)throw new Error("status network not 200");u("Спасибо! Мы скоро с вами свяжемся!"),n.forEach((e=>{"text"!==e.type&&"tel"!==e.type||(e.value="")}))})).catch((e=>{u(e)}))},m=function(){const e=a.get(this.name);this.title=i.get(this.name),"phone"===this.name?("+"===this.value[0]?this.value=this.value.replace(e,""):this.value.length>0&&(this.value="+"+this.value.replace(e,"")),this.value.length>=13&&(this.value=this.value.substr(0,13))):"Промокод"!==this.placeholder?this.value=this.value.replace(e,""):this.value=this.value.replace(/[^А-яЁё0-9\s]+$/,"")};e.setAttribute("novalidate",!0),e.addEventListener("submit",d),t.setAttribute("novalidate",!0),t.addEventListener("submit",d),n.setAttribute("novalidate",!0),n.addEventListener("submit",d),s.setAttribute("novalidate",!0),s.addEventListener("submit",d),r.setAttribute("novalidate",!0),r.addEventListener("submit",d),document.addEventListener("click",(e=>{const t=e.target;a.has(t.name)&&t.addEventListener("input",m)}))})(),(()=>{const e=document.getElementById("totop"),t=document.getElementById("banner"),n=document.querySelector(".top-menu");e.style.display="none",window.addEventListener("scroll",(()=>{window.pageYOffset>t.offsetTop-n.offsetHeight?e.style.display="inline-block":e.style.display="none"}))})()})();